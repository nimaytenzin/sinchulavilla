<!-- Theatre Add Modal Content -->
<p-toast position="top-right"></p-toast>
<div class="theatre-add-form">
	<form [formGroup]="theatreForm" (ngSubmit)="onSubmit()">
		<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
			<!-- Left Column - Basic Information -->
			<div class="space-y-4">
				<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
					Basic Information
				</h3>

				<!-- Theatre Name -->
				<div class="field">
					<label
						for="name"
						class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
					>
						Theatre Name *
					</label>
					<input
						id="name"
						type="text"
						formControlName="name"
						pInputText
						placeholder="Enter theatre name"
						class="w-full"
					/>
					<small class="p-error" *ngIf="isFieldInvalid('name')">
						{{ getFieldErrorMessage("name") }}
					</small>
				</div>

				<!-- Address -->
				<div class="field">
					<label
						for="address"
						class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
					>
						Address *
					</label>
					<textarea
						id="address"
						formControlName="address"
						pInputTextarea
						placeholder="Enter complete address"
						rows="3"
						class="w-full"
					></textarea>
					<small class="p-error" *ngIf="isFieldInvalid('address')">
						{{ getFieldErrorMessage("address") }}
					</small>
				</div>

				<!-- Dzongkhag -->
				<div class="field">
					<label
						for="dzongkhagId"
						class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
					>
						Dzongkhag *
					</label>
					<p-dropdown
						id="dzongkhagId"
						formControlName="dzongkhagId"
						[options]="dzongkhagOptions"
						optionLabel="label"
						optionValue="value"
						placeholder="Select dzongkhag"
						class="w-full"
					></p-dropdown>
					<small class="p-error" *ngIf="isFieldInvalid('dzongkhagId')">
						{{ getFieldErrorMessage("dzongkhagId") }}
					</small>
				</div>

				<!-- GMAP Row -->
				<div class="field">
					<label
						for="googleMapAddressUrl"
						class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
					>
						Google Maps URL *
					</label>
					<input
						id="googleMapAddressUrl"
						type="text"
						formControlName="googleMapAddressUrl"
						pInputText
						placeholder="Enter Google Maps URL"
						class="w-full"
					/>
					<small class="p-error" *ngIf="isFieldInvalid('googleMapAddressUrl')">
						{{ getFieldErrorMessage("googleMapAddressUrl") }}
					</small>
				</div>
			</div>

			<!-- Right Column - Image Upload -->
			<div class="space-y-4">
				<h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
					Theatre Image
				</h3>

				<!-- Image Upload -->
				<div class="field">
					<label
						for="imageFile"
						class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
					>
						Upload Theatre Image
					</label>
					<div class="image-upload-container">
						<!-- File Input -->
						<input
							#fileInput
							type="file"
							id="imageFile"
							accept="image/*"
							(change)="onFileSelect($event)"
							class="hidden"
						/>

						<!-- Upload Button or Preview -->
						<div class="upload-area" *ngIf="!imagePreview">
							<button
								type="button"
								pButton
								icon="pi pi-upload"
								label="Select Image"
								class="p-button-outlined w-full"
								(click)="fileInput.click()"
							></button>
							<p class="text-sm text-gray-500 mt-2 text-center">
								JPG, PNG, GIF up to 5MB
							</p>
						</div>

						<!-- Image Preview -->
						<div class="image-preview" *ngIf="imagePreview">
							<div class="preview-container">
								<img
									[src]="imagePreview"
									alt="Theatre preview"
									class="preview-image"
								/>
								<div class="preview-overlay">
									<button
										type="button"
										pButton
										icon="pi pi-times"
										class="p-button-rounded p-button-danger p-button-sm"
										(click)="removeImage()"
										pTooltip="Remove image"
									></button>
									<button
										type="button"
										pButton
										icon="pi pi-pencil"
										class="p-button-rounded p-button-secondary p-button-sm ml-2"
										(click)="fileInput.click()"
										pTooltip="Change image"
									></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Form Actions -->
		<div
			class="flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700"
		>
			<p-button
				label="Cancel"
				icon="pi pi-times"
				severity="secondary"
				[outlined]="true"
				(onClick)="onCancel()"
				[disabled]="loading"
			></p-button>
			<p-button
				label="Create Theatre"
				icon="pi pi-check"
				severity="primary"
				type="submit"
				[loading]="loading"
				[disabled]="theatreForm.invalid"
			></p-button>
		</div>
	</form>
</div>
