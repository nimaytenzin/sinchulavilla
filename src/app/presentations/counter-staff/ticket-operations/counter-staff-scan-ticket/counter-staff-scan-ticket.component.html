<div
	class="flex flex-col items-center justify-center min-h-screen w-full px-2 py-4 bg-slate-50"
>
	<div class="w-full max-w-md">
		<div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center">
			<div *ngIf="!qrResult" class="w-full flex flex-col items-center">
				<zxing-scanner
					[autostart]="true"
					(scanSuccess)="onScanSuccess($event)"
					class="w-full h-64 rounded-xl border border-slate-200 mb-4"
				></zxing-scanner>
				<div class="text-slate-500 mt-2">
					Align the QR code within the frame to scan
				</div>
			</div>
			<div *ngIf="qrResult && booking" class="w-full">
				<div class="flex flex-col items-center mb-6">
					<div
						class="bg-green-100 border border-green-300 rounded-full w-16 h-16 flex items-center justify-center mb-2"
					>
						<i class="pi pi-check text-green-600 text-3xl"></i>
					</div>
					<h2 class="text-2xl font-bold text-green-700 mb-1">
						Booking Confirmed
					</h2>
					x
					<div class="text-slate-500 text-sm">
						Entry Status:
						<span class="font-semibold text-green-700">{{
							booking.entryStatus
						}}</span>
					</div>
				</div>
				<div class="grid grid-cols-1 gap-4 mb-4">
					<div
						class="flex flex-col sm:flex-row sm:items-center justify-between"
					>
						<span class="font-semibold text-slate-700">Name:</span>
						<span class="text-slate-800">{{ booking.name }}</span>
					</div>
					<div
						class="flex flex-col sm:flex-row sm:items-center justify-between"
					>
						<span class="font-semibold text-slate-700">Phone:</span>
						<span class="text-slate-800">{{ booking.phoneNumber }}</span>
					</div>
					<div
						class="flex flex-col sm:flex-row sm:items-center justify-between"
					>
						<span class="font-semibold text-slate-700">Email:</span>
						<span class="text-slate-800">{{ booking.email || "N/A" }}</span>
					</div>
					<div
						class="flex flex-col sm:flex-row sm:items-center justify-between"
					>
						<span class="font-semibold text-slate-700">Amount:</span>
						<span class="text-green-700 font-bold"
							>Nu. {{ booking.amount }}</span
						>
					</div>
					<div
						class="flex flex-col sm:flex-row sm:items-center justify-between"
					>
						<span class="font-semibold text-slate-700">Status:</span>
						<span class="text-blue-700 font-semibold">{{
							booking.bookingStatus
						}}</span>
					</div>
				</div>
				<div class="bg-slate-50 rounded-xl p-4 mb-4">
					<div class="font-semibold text-slate-700 mb-2">Movie & Screening</div>
					<div class="flex flex-col gap-1">
						<div>
							<span class="font-semibold">Movie:</span>
							{{ booking.screening?.movie?.name }}
						</div>
						<div>
							<span class="font-semibold">Hall:</span>
							{{ booking.screening?.hall?.name }}
						</div>
						<div>
							<span class="font-semibold">Date:</span>
							{{ booking.screening?.date | date : "mediumDate" }}
						</div>
						<div>
							<span class="font-semibold">Time:</span>
							{{ booking.screening?.startTime }} -
							{{ booking.screening?.endTime }}
						</div>
					</div>
				</div>
				<div class="bg-slate-50 rounded-xl p-4 mb-4">
					<div class="font-semibold text-slate-700 mb-2">Seats</div>
					<div class="flex flex-wrap gap-2">
						<span
							*ngFor="let seat of booking.bookingSeats"
							class="inline-block bg-blue-100 text-blue-700 font-semibold rounded-lg px-3 py-1 text-sm"
						>
							{{ seat.seat?.seatNumber }}
							<span class="text-xs text-slate-500"
								>({{ seat.seat?.category?.name }})</span
							>
						</span>
					</div>
				</div>
				<button
					pButton
					type="button"
					icon="pi pi-refresh"
					label="Scan Again"
					(click)="qrResult = null; booking = null"
					styleClass="!bg-blue-500 !border-none !rounded-xl !px-6 !py-2 w-full mt-2"
				></button>
			</div>
			<div
				*ngIf="qrResult && !booking"
				class="w-full text-center text-red-600 font-semibold mt-6"
			>
				Invalid or not found booking.
				<button
					pButton
					type="button"
					icon="pi pi-refresh"
					label="Scan Again"
					(click)="qrResult = null; booking = null"
					styleClass="!bg-blue-500 !border-none !rounded-xl !px-6 !py-2 w-full mt-4"
				></button>
			</div>
		</div>
	</div>
</div>
