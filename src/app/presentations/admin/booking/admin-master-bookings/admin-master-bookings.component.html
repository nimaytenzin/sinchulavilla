<!-- Admin Master Bookings Component -->
<div class="min-h-screen bg-slate-50/50 p-4 sm:p-6">
	<!-- Header Section -->
	<div class="mb-6 sm:mb-8">
		<div
			class="bg-white rounded-2xl border border-slate-200/60 overflow-hidden"
		>
			<!-- Gradient Header Bar -->
			<div class="h-1 bg-blue-400"></div>

			<div class="p-6 sm:p-8">
				<div
					class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6"
				>
					<!-- Title Section -->
					<div class="flex-1 space-y-2">
						<div class="flex items-center gap-3 mb-2">
							<div
								class="w-10 h-10 bg-blue-400 rounded-xl flex items-center justify-center"
							>
								<i class="pi pi-ticket text-white text-lg"></i>
							</div>
							<h1 class="text-3xl sm:text-4xl font-bold text-slate-800">
								Bookings Management
							</h1>
						</div>
						<p
							class="text-slate-600 text-base sm:text-lg leading-relaxed max-w-2xl"
						>
							Manage all movie bookings across confirmed, processing, and failed
							statuses
						</p>
					</div>

					<!-- Action Buttons -->
					<div class="flex flex-col sm:flex-row gap-3">
						<button
							type="button"
							class="px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium flex items-center gap-2"
							(click)="openSearchByCustomer()"
						>
							<i class="pi pi-search"></i>
							Search by Customer
						</button>
						<button
							type="button"
							class="px-6 py-3 border border-slate-300 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors font-medium flex items-center gap-2"
							(click)="refreshBookings()"
						>
							<i class="pi pi-refresh"></i>
							Refresh
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Main Content Area -->
	<div class="bg-white rounded-2xl border border-slate-200/60 overflow-hidden">
		<!-- Tab Navigation -->
		<div class="border-b border-slate-200">
			<div class="p-6 pb-0">
				<p-tabView
					[(activeIndex)]="activeTabIndex"
					(onChange)="onTabChange($event)"
				>
					<!-- Confirmed Bookings Tab -->
					<p-tabPanel header="Confirmed Bookings">
						<!-- Statistics Cards for Confirmed -->
						<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
							<!-- Total Confirmed Count -->
							<div class="bg-green-50 rounded-xl p-6 border border-green-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-check-circle text-green-600 text-xl"></i>
									</div>
									<div>
										<p class="text-green-600 text-sm font-medium mb-1">
											Total Confirmed
										</p>
										<p class="text-2xl font-bold text-green-800">
											{{ getTotalConfirmedBookings() }}
										</p>
									</div>
								</div>
							</div>

							<!-- Currently Displayed -->
							<div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-list text-blue-600 text-xl"></i>
									</div>
									<div>
										<p class="text-blue-600 text-sm font-medium mb-1">
											Currently Displayed
										</p>
										<p class="text-2xl font-bold text-blue-800">
											{{ confirmedBookings.length }}
										</p>
									</div>
								</div>
							</div>

							<!-- Page Info -->
							<div class="bg-slate-50 rounded-xl p-6 border border-slate-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-file text-slate-600 text-xl"></i>
									</div>
									<div>
										<p class="text-slate-600 text-sm font-medium mb-1">
											Current Page
										</p>
										<p class="text-2xl font-bold text-slate-800">
											{{ confirmedPage }}
										</p>
									</div>
								</div>
							</div>
						</div>
						<!-- Confirmed Bookings Table -->
						<div class="space-y-4">
							<!-- Loading State -->
							<div *ngIf="confirmedLoading" class="flex justify-center py-8">
								<p-progressSpinner
									[style]="{ width: '50px', height: '50px' }"
									strokeWidth="6"
									fill="transparent"
									animationDuration=".5s"
								></p-progressSpinner>
							</div>

							<!-- Empty State -->
							<div
								*ngIf="!confirmedLoading && confirmedBookings.length === 0"
								class="text-center py-12"
							>
								<div
									class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"
								>
									<i class="pi pi-ticket text-slate-400 text-2xl"></i>
								</div>
								<h3 class="text-lg font-medium text-slate-700 mb-2">
									No confirmed bookings found
								</h3>
								<p class="text-slate-500">
									There are no confirmed bookings at the moment.
								</p>
							</div>

							<!-- Confirmed Bookings Table -->
							<div *ngIf="!confirmedLoading && confirmedBookings.length > 0">
								<p-table
									[value]="confirmedBookings"
									[paginator]="false"
									responsiveLayout="scroll"
									styleClass="p-datatable-sm"
								>
									<ng-template pTemplate="header">
										<tr class="bg-slate-50">
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-hashtag text-green-500"></i>
													Booking ID
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-video text-green-500"></i>
													Movie
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-user text-green-500"></i>
													Customer
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-building text-green-500"></i>
													Theatre & Hall
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-clock text-green-500"></i>
													Screening Time
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-dollar text-green-500"></i>
													Amount
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-info-circle text-green-500"></i>
													Entry Status
												</div>
											</th>
										</tr>
									</ng-template>

									<ng-template pTemplate="body" let-booking>
										<tr
											class="border-b border-slate-100 hover:bg-slate-50/70 transition-colors duration-200"
										>
											<!-- Booking ID -->
											<td class="!p-4 !border-none">
												<span
													class="font-mono text-sm font-medium text-slate-700"
													>#{{ booking.id }}</span
												>
											</td>

											<!-- Movie -->
											<td class="!p-4 !border-none">
												<div class="flex items-center gap-3">
													<div class="relative flex-shrink-0">
														<img
															*ngIf="getMoviePosterUrl(booking)"
															[src]="getMoviePosterUrl(booking)"
															[alt]="getMovieTitle(booking)"
															class="w-10 h-12 object-cover rounded-lg shadow-sm border border-slate-200"
															loading="lazy"
															(error)="onImageError($event)"
														/>
														<div
															*ngIf="!getMoviePosterUrl(booking)"
															class="w-10 h-12 bg-slate-100 rounded-lg flex items-center justify-center border border-slate-200"
														>
															<i class="pi pi-image text-slate-400 text-sm"></i>
														</div>
													</div>
													<div>
														<div class="font-medium text-slate-800 text-sm">
															{{ getMovieTitle(booking) }}
														</div>
													</div>
												</div>
											</td>

											<!-- Customer -->
											<td class="!p-4 !border-none">
												<div class="space-y-1">
													<div class="font-medium text-slate-800 text-sm">
														{{ booking.name }}
													</div>
													<div class="text-xs text-slate-500">
														{{ booking.phoneNumber }}
													</div>
													<div
														*ngIf="booking.email"
														class="text-xs text-slate-500"
													>
														{{ booking.email }}
													</div>
												</div>
											</td>

											<!-- Theatre & Hall -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getTheatreInfo(booking) }}
												</div>
											</td>

											<!-- Screening Time -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getScreeningTime(booking) }}
												</div>
											</td>

											<!-- Amount -->
											<td class="!p-4 !border-none">
												<span
													class="inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-green-100 text-green-800"
												>
													{{ formatCurrency(booking.totalAmount) }}
												</span>
											</td>

											<!-- Entry Status -->
											<td class="!p-4 !border-none">
												<p-tag
													[value]="booking.entryStatus"
													[severity]="
														getEntryStatusSeverity(booking.entryStatus)
													"
													styleClass="!text-xs !px-2 !py-1"
												></p-tag>
											</td>
										</tr>
									</ng-template>

									<ng-template pTemplate="emptymessage">
										<tr>
											<td colspan="7" class="text-center py-8">
												<div class="text-slate-500">
													No confirmed bookings found
												</div>
											</td>
										</tr>
									</ng-template>
								</p-table>
							</div>

							<!-- Pagination for Confirmed Bookings -->
							<div
								*ngIf="!confirmedLoading && confirmedPagination"
								class="flex flex-col sm:flex-row items-center justify-between gap-4 pt-4"
							>
								<div class="text-sm text-slate-600">
									Showing {{ confirmedBookings.length }} of
									{{ confirmedPagination?.pagination?.totalCount || 0 }}
									confirmed bookings
								</div>
								<p-paginator
									[rows]="confirmedPageSize"
									[totalRecords]="
										confirmedPagination?.pagination?.totalCount || 0
									"
									[first]="(confirmedPage - 1) * confirmedPageSize"
									(onPageChange)="onConfirmedPageChange($event)"
									[showCurrentPageReport]="false"
									[alwaysShow]="false"
								></p-paginator>
							</div>
						</div>
					</p-tabPanel>

					<!-- Processing Bookings Tab -->
					<p-tabPanel header="Processing Bookings">
						<!-- Statistics Cards for Processing -->
						<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
							<!-- Total Processing Count -->
							<div class="bg-yellow-50 rounded-xl p-6 border border-yellow-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-clock text-yellow-600 text-xl"></i>
									</div>
									<div>
										<p class="text-yellow-600 text-sm font-medium mb-1">
											Total Processing
										</p>
										<p class="text-2xl font-bold text-yellow-800">
											{{ getTotalProcessingBookings() }}
										</p>
									</div>
								</div>
							</div>

							<!-- Currently Displayed -->
							<div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-list text-blue-600 text-xl"></i>
									</div>
									<div>
										<p class="text-blue-600 text-sm font-medium mb-1">
											Currently Displayed
										</p>
										<p class="text-2xl font-bold text-blue-800">
											{{ processingBookings.length }}
										</p>
									</div>
								</div>
							</div>

							<!-- Page Info -->
							<div class="bg-slate-50 rounded-xl p-6 border border-slate-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-file text-slate-600 text-xl"></i>
									</div>
									<div>
										<p class="text-slate-600 text-sm font-medium mb-1">
											Current Page
										</p>
										<p class="text-2xl font-bold text-slate-800">
											{{ processingPage }}
										</p>
									</div>
								</div>
							</div>
						</div>
						<!-- Processing Bookings Table -->
						<div class="space-y-4">
							<!-- Loading State -->
							<div *ngIf="processingLoading" class="flex justify-center py-8">
								<p-progressSpinner
									[style]="{ width: '50px', height: '50px' }"
									strokeWidth="6"
									fill="transparent"
									animationDuration=".5s"
								></p-progressSpinner>
							</div>

							<!-- Empty State -->
							<div
								*ngIf="!processingLoading && processingBookings.length === 0"
								class="text-center py-12"
							>
								<div
									class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"
								>
									<i class="pi pi-clock text-slate-400 text-2xl"></i>
								</div>
								<h3 class="text-lg font-medium text-slate-700 mb-2">
									No processing bookings found
								</h3>
								<p class="text-slate-500">
									There are no bookings currently being processed.
								</p>
							</div>

							<!-- Processing Bookings Table -->
							<div *ngIf="!processingLoading && processingBookings.length > 0">
								<p-table
									[value]="processingBookings"
									[paginator]="false"
									responsiveLayout="scroll"
									styleClass="p-datatable-sm"
								>
									<ng-template pTemplate="header">
										<tr class="bg-slate-50">
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-hashtag text-yellow-500"></i>
													Booking ID
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-video text-yellow-500"></i>
													Movie
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-user text-yellow-500"></i>
													Customer
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-building text-yellow-500"></i>
													Theatre & Hall
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-clock text-yellow-500"></i>
													Screening Time
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-dollar text-yellow-500"></i>
													Amount
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-info-circle text-yellow-500"></i>
													Status
												</div>
											</th>
										</tr>
									</ng-template>

									<ng-template pTemplate="body" let-booking>
										<tr
											class="border-b border-slate-100 hover:bg-slate-50/70 transition-colors duration-200"
										>
											<!-- Booking ID -->
											<td class="!p-4 !border-none">
												<span
													class="font-mono text-sm font-medium text-slate-700"
													>#{{ booking.id }}</span
												>
											</td>

											<!-- Movie -->
											<td class="!p-4 !border-none">
												<div class="flex items-center gap-3">
													<div class="relative flex-shrink-0">
														<img
															*ngIf="getMoviePosterUrl(booking)"
															[src]="getMoviePosterUrl(booking)"
															[alt]="getMovieTitle(booking)"
															class="w-10 h-12 object-cover rounded-lg shadow-sm border border-slate-200"
															loading="lazy"
															(error)="onImageError($event)"
														/>
														<div
															*ngIf="!getMoviePosterUrl(booking)"
															class="w-10 h-12 bg-slate-100 rounded-lg flex items-center justify-center border border-slate-200"
														>
															<i class="pi pi-image text-slate-400 text-sm"></i>
														</div>
													</div>
													<div>
														<div class="font-medium text-slate-800 text-sm">
															{{ getMovieTitle(booking) }}
														</div>
													</div>
												</div>
											</td>

											<!-- Customer -->
											<td class="!p-4 !border-none">
												<div class="space-y-1">
													<div class="font-medium text-slate-800 text-sm">
														{{ booking.name }}
													</div>
													<div class="text-xs text-slate-500">
														{{ booking.phoneNumber }}
													</div>
													<div
														*ngIf="booking.email"
														class="text-xs text-slate-500"
													>
														{{ booking.email }}
													</div>
												</div>
											</td>

											<!-- Theatre & Hall -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getTheatreInfo(booking) }}
												</div>
											</td>

											<!-- Screening Time -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getScreeningTime(booking) }}
												</div>
											</td>

											<!-- Amount -->
											<td class="!p-4 !border-none">
												<span
													class="inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-yellow-100 text-yellow-800"
												>
													{{ formatCurrency(booking.totalAmount) }}
												</span>
											</td>

											<!-- Status -->
											<td class="!p-4 !border-none">
												<p-tag
													[value]="booking.status"
													[severity]="getStatusSeverity(booking.status)"
													styleClass="!text-xs !px-2 !py-1"
												></p-tag>
											</td>
										</tr>
									</ng-template>

									<ng-template pTemplate="emptymessage">
										<tr>
											<td colspan="7" class="text-center py-8">
												<div class="text-slate-500">
													No processing bookings found
												</div>
											</td>
										</tr>
									</ng-template>
								</p-table>
							</div>

							<!-- Pagination for Processing Bookings -->
							<div
								*ngIf="!processingLoading && processingPagination"
								class="flex flex-col sm:flex-row items-center justify-between gap-4 pt-4"
							>
								<div class="text-sm text-slate-600">
									Showing {{ processingBookings.length }} of
									{{ processingPagination?.pagination?.totalCount || 0 }}
									processing bookings
								</div>
								<p-paginator
									[rows]="processingPageSize"
									[totalRecords]="
										processingPagination?.pagination?.totalCount || 0
									"
									[first]="(processingPage - 1) * processingPageSize"
									(onPageChange)="onProcessingPageChange($event)"
									[showCurrentPageReport]="false"
									[alwaysShow]="false"
								></p-paginator>
							</div>
						</div>
					</p-tabPanel>

					<!-- Failed Bookings Tab -->
					<p-tabPanel header="Failed Bookings">
						<!-- Statistics Cards for Failed -->
						<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
							<!-- Total Failed Count -->
							<div class="bg-red-50 rounded-xl p-6 border border-red-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-times-circle text-red-600 text-xl"></i>
									</div>
									<div>
										<p class="text-red-600 text-sm font-medium mb-1">
											Total Failed
										</p>
										<p class="text-2xl font-bold text-red-800">
											{{ getTotalFailedBookings() }}
										</p>
									</div>
								</div>
							</div>

							<!-- Currently Displayed -->
							<div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-list text-blue-600 text-xl"></i>
									</div>
									<div>
										<p class="text-blue-600 text-sm font-medium mb-1">
											Currently Displayed
										</p>
										<p class="text-2xl font-bold text-blue-800">
											{{ failedBookings.length }}
										</p>
									</div>
								</div>
							</div>

							<!-- Page Info -->
							<div class="bg-slate-50 rounded-xl p-6 border border-slate-100">
								<div class="flex items-center gap-3">
									<div
										class="w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center"
									>
										<i class="pi pi-file text-slate-600 text-xl"></i>
									</div>
									<div>
										<p class="text-slate-600 text-sm font-medium mb-1">
											Current Page
										</p>
										<p class="text-2xl font-bold text-slate-800">
											{{ failedPage }}
										</p>
									</div>
								</div>
							</div>
						</div>
						<!-- Failed Bookings Table -->
						<div class="space-y-4">
							<!-- Loading State -->
							<div *ngIf="failedLoading" class="flex justify-center py-8">
								<p-progressSpinner
									[style]="{ width: '50px', height: '50px' }"
									strokeWidth="6"
									fill="transparent"
									animationDuration=".5s"
								></p-progressSpinner>
							</div>

							<!-- Empty State -->
							<div
								*ngIf="!failedLoading && failedBookings.length === 0"
								class="text-center py-12"
							>
								<div
									class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4"
								>
									<i class="pi pi-times text-slate-400 text-2xl"></i>
								</div>
								<h3 class="text-lg font-medium text-slate-700 mb-2">
									No failed bookings found
								</h3>
								<p class="text-slate-500">
									There are no failed bookings at the moment.
								</p>
							</div>

							<!-- Failed Bookings Table -->
							<div *ngIf="!failedLoading && failedBookings.length > 0">
								<p-table
									[value]="failedBookings"
									[paginator]="false"
									responsiveLayout="scroll"
									styleClass="p-datatable-sm"
								>
									<ng-template pTemplate="header">
										<tr class="bg-slate-50">
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-hashtag text-red-500"></i>
													Booking ID
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-video text-red-500"></i>
													Movie
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-user text-red-500"></i>
													Customer
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-building text-red-500"></i>
													Theatre & Hall
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-clock text-red-500"></i>
													Screening Time
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-dollar text-red-500"></i>
													Amount
												</div>
											</th>
											<th
												class="!p-4 !text-left !font-semibold !text-slate-700 !text-sm !border-b !border-slate-200"
											>
												<div class="flex items-center gap-2">
													<i class="pi pi-info-circle text-red-500"></i>
													Status
												</div>
											</th>
										</tr>
									</ng-template>

									<ng-template pTemplate="body" let-booking>
										<tr
											class="border-b border-slate-100 hover:bg-slate-50/70 transition-colors duration-200"
										>
											<!-- Booking ID -->
											<td class="!p-4 !border-none">
												<span
													class="font-mono text-sm font-medium text-slate-700"
													>#{{ booking.id }}</span
												>
											</td>

											<!-- Movie -->
											<td class="!p-4 !border-none">
												<div class="flex items-center gap-3">
													<div class="relative flex-shrink-0">
														<img
															*ngIf="getMoviePosterUrl(booking)"
															[src]="getMoviePosterUrl(booking)"
															[alt]="getMovieTitle(booking)"
															class="w-10 h-12 object-cover rounded-lg shadow-sm border border-slate-200"
															loading="lazy"
															(error)="onImageError($event)"
														/>
														<div
															*ngIf="!getMoviePosterUrl(booking)"
															class="w-10 h-12 bg-slate-100 rounded-lg flex items-center justify-center border border-slate-200"
														>
															<i class="pi pi-image text-slate-400 text-sm"></i>
														</div>
													</div>
													<div>
														<div class="font-medium text-slate-800 text-sm">
															{{ getMovieTitle(booking) }}
														</div>
													</div>
												</div>
											</td>

											<!-- Customer -->
											<td class="!p-4 !border-none">
												<div class="space-y-1">
													<div class="font-medium text-slate-800 text-sm">
														{{ booking.name }}
													</div>
													<div class="text-xs text-slate-500">
														{{ booking.phoneNumber }}
													</div>
													<div
														*ngIf="booking.email"
														class="text-xs text-slate-500"
													>
														{{ booking.email }}
													</div>
												</div>
											</td>

											<!-- Theatre & Hall -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getTheatreInfo(booking) }}
												</div>
											</td>

											<!-- Screening Time -->
											<td class="!p-4 !border-none">
												<div class="text-sm text-slate-700">
													{{ getScreeningTime(booking) }}
												</div>
											</td>

											<!-- Amount -->
											<td class="!p-4 !border-none">
												<span
													class="inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-semibold bg-red-100 text-red-800"
												>
													{{ formatCurrency(booking.totalAmount) }}
												</span>
											</td>

											<!-- Status -->
											<td class="!p-4 !border-none">
												<p-tag
													[value]="booking.status"
													[severity]="getStatusSeverity(booking.status)"
													styleClass="!text-xs !px-2 !py-1"
												></p-tag>
											</td>
										</tr>
									</ng-template>

									<ng-template pTemplate="emptymessage">
										<tr>
											<td colspan="7" class="text-center py-8">
												<div class="text-slate-500">
													No failed bookings found
												</div>
											</td>
										</tr>
									</ng-template>
								</p-table>
							</div>

							<!-- Pagination for Failed Bookings -->
							<div
								*ngIf="!failedLoading && failedPagination"
								class="flex flex-col sm:flex-row items-center justify-between gap-4 pt-4"
							>
								<div class="text-sm text-slate-600">
									Showing {{ failedBookings.length }} of
									{{ failedPagination?.pagination?.totalCount || 0 }} failed
									bookings
								</div>
								<p-paginator
									[rows]="failedPageSize"
									[totalRecords]="failedPagination?.pagination?.totalCount || 0"
									[first]="(failedPage - 1) * failedPageSize"
									(onPageChange)="onFailedPageChange($event)"
									[showCurrentPageReport]="false"
									[alwaysShow]="false"
								></p-paginator>
							</div>
						</div>
					</p-tabPanel>
				</p-tabView>
			</div>
		</div>
	</div>
</div>

<!-- Toast Messages -->
<p-toast position="top-right"></p-toast>
